tosca_definitions_version: tosca_simple_yaml_1_0_0_wd03
description: Alien4Cloud generated service template
template_name: Nginx2
template_version: 0.1.0-SNAPSHOT
template_author: admin

imports:
  - janus-types: <janus-types.yml>


topology_template:
  node_templates:
    KubernetesContainer:
      type: janus.nodes.KubernetesContainer
      properties:
        image: nginx
        namespace: default
  workflows:
    install:
      steps:
        KubernetesContainer_install:
          node: KubernetesContainer
          activity:
            delegate: install
          on-success:
            - KubernetesContainer_initial
        KubernetesContainer_initial:
          node: KubernetesContainer
          activity:
            set_state: initial
          on-success:
            - KubernetesContainer_creating
        KubernetesContainer_creating:
          node: KubernetesContainer
          activity:
            set_state: creating
          on-success:
            - KubernetesContainer_created
        KubernetesContainer_created:
          node: KubernetesContainer
          activity:
            set_state: created
          on-success:
            - KubernetesContainer_configuring
        KubernetesContainer_configuring:
          node: KubernetesContainer
          activity:
            set_state: configuring
          on-success:
            - configure_KubernetesContainer
        configure_KubernetesContainer:
          node: KubernetesContainer
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - KubernetesContainer_configured
        KubernetesContainer_configured:
          node: KubernetesContainer
          activity:
            set_state: configured
          on-success:
            - KubernetesContainer_starting
        KubernetesContainer_starting:
          node: KubernetesContainer
          activity:
            set_state: starting
          on-success:
            - start_KubernetesContainer
        start_KubernetesContainer:
          node: KubernetesContainer
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - KubernetesContainer_started
        KubernetesContainer_started:
          node: KubernetesContainer
          activity:
            set_state: started
    uninstall:
      steps:
        KubernetesContainer_stopping:
          node: KubernetesContainer
          activity:
            set_state: stopping
          on-success:
            - stop_KubernetesContainer
        stop_KubernetesContainer:
          node: KubernetesContainer
          activity:
            delegate: uninstall
          on-success:
            - KubernetesContainer_stopped
        KubernetesContainer_stopped:
          node: KubernetesContainer
          activity:
            set_state: stopped
          on-success:
            - KubernetesContainer_deleting
        KubernetesContainer_deleting:
          node: KubernetesContainer
          activity:
            set_state: deleting
          on-success:
            - delete_KubernetesContainer
        delete_KubernetesContainer:
          node: KubernetesContainer
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.delete
          on-success:
            - KubernetesContainer_deleted
        KubernetesContainer_deleted:
          node: KubernetesContainer
          activity:
            set_state: deleted
