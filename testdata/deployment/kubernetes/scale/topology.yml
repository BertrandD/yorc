tosca_definitions_version: alien_dsl_1_3_0
description: ""
template_name: test-Environment
template_version: 0.1.0-SNAPSHOT
template_author: ${template_author}

imports:
  - path: kubernetes-samples-types/kubernetes-samples-types.yaml

topology_template:
  node_templates:
    SoakTest:
      type: janus.nodes.Docker.SoakTest
      properties:
        docker_ports: 80
      capabilities:
        scalable:
          properties:
            min_instances: 1
            max_instances: 10
            default_instances: 3
  workflows:
    install:
      steps:
        SoakTest_initial:
          node: SoakTest
          activity:
            set_state: initial
          on-success:
            - SoakTest_creating
        SoakTest_creating:
          node: SoakTest
          activity:
            set_state: creating
          on-success:
            - SoakTest_created
        SoakTest_created:
          node: SoakTest
          activity:
            set_state: created
          on-success:
            - SoakTest_configuring
        SoakTest_configuring:
          node: SoakTest
          activity:
            set_state: configuring
          on-success:
            - configure_SoakTest
        configure_SoakTest:
          node: SoakTest
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - SoakTest_configured
        SoakTest_configured:
          node: SoakTest
          activity:
            set_state: configured
          on-success:
            - SoakTest_starting
        SoakTest_starting:
          node: SoakTest
          activity:
            set_state: starting
          on-success:
            - start_SoakTest
        start_SoakTest:
          node: SoakTest
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - SoakTest_started
        SoakTest_started:
          node: SoakTest
          activity:
            set_state: started
    uninstall:
      steps:
        SoakTest_stopping:
          node: SoakTest
          activity:
            set_state: stopping
          on-success:
            - stop_SoakTest
        stop_SoakTest:
          node: SoakTest
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.stop
          on-success:
            - SoakTest_stopped
        SoakTest_stopped:
          node: SoakTest
          activity:
            set_state: stopped
          on-success:
            - SoakTest_deleting
        SoakTest_deleting:
          node: SoakTest
          activity:
            set_state: deleting
          on-success:
            - delete_SoakTest
        delete_SoakTest:
          node: SoakTest
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.delete
          on-success:
            - SoakTest_deleted
        SoakTest_deleted:
          node: SoakTest
          activity:
            set_state: deleted

