tosca_definitions_version: tosca_simple_yaml_1_0_0_wd03
description: Alien4Cloud generated service template
template_name: OpenStack_appli_20160915-132828
template_version: 1.0.0-SNAPSHOT
template_author: admin

imports:
  - openstack-types: <janus-openstack-types.yml>
  - path: demo-lifecycle/1.0.0-SNAPSHOT/expanded/demo-lifecycle.yml
  - path: php-type/2.0.0-SNAPSHOT/expanded/php-type.yml
  - path: apache-type/2.0.0-SNAPSHOT/expanded/apache-type.yml
topology_template:
  description: OpenStack application description
  node_templates:
    ComputeRegistry:
      type: janus.nodes.openstack.Compute
      properties:
        region: RegionOne
        key_pair: janus
        user: "ubuntu"
        flavor: 2
        key_pair: janus
        # Liberty
        image: 9b4b5a69-5616-480b-979a-e7e0162f54c6
        # IceHouse
#        image: 3c6b792c-ab6d-4290-aab5-f62b724f8d3a
#        availability_zone: r423-02.share.ops
      requirements:
        - network:
            node: Network
            capability: janus.capabilities.openstack.FIPConnectivity
      capabilities:
        endpoint:
          properties:
            protocol: tcp
            initiator: source
            network_name: PRIVATE
            secure: true
        scalable:
          properties:
            min_instances: 1
            max_instances: 1
            default_instances: 1
    ComputeB:
      type: janus.nodes.openstack.Compute
      properties:
        region: RegionOne
        key_pair: janus
        user: "ubuntu"
        flavor: 2
        key_pair: janus
        # Liberty
        image: 9b4b5a69-5616-480b-979a-e7e0162f54c6
        # IceHouse
#        image: 3c6b792c-ab6d-4290-aab5-f62b724f8d3a
#        availability_zone: r423-02.share.ops
      capabilities:
        endpoint:
          properties:
            protocol: tcp
            initiator: source
            network_name: PRIVATE
            secure: true
        scalable:
          properties:
            min_instances: 1
            max_instances: 3
            default_instances: 2
    GenericA:
      type: alien.nodes.Generic
      requirements:
        - host:
            node: GenericHostA
            capability: tosca.capabilities.Container
            relationship: alien.relationships.GenericHostedOnGenericHost
        - generic_requirement:
            node: GenericB
            capability: alien.capabilities.GenericCapability
            relationship: alien.relationships.GenericConnectToGeneric
    ComputeA:
      type: janus.nodes.openstack.Compute
      properties:
        region: RegionOne
        key_pair: janus
        user: "ubuntu"
        flavor: 2
        key_pair: janus
        # Liberty
        image: 9b4b5a69-5616-480b-979a-e7e0162f54c6
        # IceHouse
#        image: 3c6b792c-ab6d-4290-aab5-f62b724f8d3a
#        availability_zone: r423-02.share.ops
      capabilities:
        endpoint:
          properties:
            protocol: tcp
            initiator: source
            network_name: PRIVATE
            secure: true
        scalable:
          properties:
            min_instances: 1
            max_instances: 3
            default_instances: 1
    GenericB:
      type: alien.nodes.Generic
      requirements:
        - host:
            node: GenericHostB
            capability: tosca.capabilities.Container
            relationship: alien.relationships.GenericHostedOnGenericHost
    Registry:
      type: alien.nodes.Registry
      requirements:
        - host:
            node: Apache
            capability: alien.capabilities.ApacheContainer
            relationship: alien.relationships.RegistryHostedOnApache
        - php:
            node: PHP
            capability: alien.capabilities.PHPModule
            relationship: alien.relationships.RegistryConnectToPHP
    Apache:
      type: alien.nodes.Apache
      properties:
        component_version: 2.4
        port: 80
        document_root: /var/www
      requirements:
        - host:
            node: ComputeRegistry
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
      capabilities:
        data_endpoint:
          properties:
            protocol: tcp
            initiator: source
            network_name: PRIVATE
            secure: false
        admin_endpoint:
          properties:
            protocol: tcp
            initiator: source
            network_name: PRIVATE
            secure: true
    RegistryConfigurerB:
      type: alien.nodes.RegistryConfigurer
      requirements:
        - host:
            node: ComputeB
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
        - registry:
            node: Registry
            capability: tosca.capabilities.Node
            relationship: alien.relationships.RegistryConfigurerDependsOnRegistry
    RegistryConfigurerA:
      type: alien.nodes.RegistryConfigurer
      requirements:
        - host:
            node: ComputeA
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
        - registry:
            node: Registry
            capability: tosca.capabilities.Node
            relationship: alien.relationships.RegistryConfigurerDependsOnRegistry
    Network:
      type: janus.nodes.openstack.FloatingIP
      properties:
        # Liberty
        floating_network_name: public-starlings
        # IceHouse
#        floating_network_name: Public_Network
    PHP:
      type: alien.nodes.PHP
      properties:
        component_version: 5
      requirements:
        - host:
            node: ComputeRegistry
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
    GenericHostA:
      type: alien.nodes.GenericHost
      requirements:
        - host:
            node: ComputeA
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
    GenericHostB:
      type: alien.nodes.GenericHost
      requirements:
        - host:
            node: ComputeB
            capability: tosca.capabilities.Container
            relationship: tosca.relationships.HostedOn
  outputs:
    Registry_url:
      value: { get_attribute: [ Registry, url ] }
  workflows:
    install:
      steps:
        Network_install:
          node: Network
          activity:
            delegate: install
          on-success:
            - Compute_install_2
        Compute_install:
          node: ComputeA
          activity:
            delegate: install
          on-success:
            - GenericHost_initial_1
            - RegistryConfigurer_initial_1
        Compute_install_1:
          node: ComputeB
          activity:
            delegate: install
          on-success:
            - GenericHost_initial
            - RegistryConfigurer_initial
        Compute_install_2:
          node: ComputeRegistry
          activity:
            delegate: install
          on-success:
            - Apache_initial
            - PHP_initial
        Registry_initial:
          node: Registry
          activity:
            set_state: initial
          on-success:
            - Registry_creating
        Registry_creating:
          node: Registry
          activity:
            set_state: creating
          on-success:
            - create_Registry
        create_Registry:
          node: Registry
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - Registry_created
        Registry_created:
          node: Registry
          activity:
            set_state: created
          on-success:
            - PHP_configuring
            - Registry_configuring
        Registry_configuring:
          node: Registry
          activity:
            set_state: configuring
          on-success:
            - configure_Registry
        configure_Registry:
          node: Registry
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - Registry_configured
        Registry_configured:
          node: Registry
          activity:
            set_state: configured
          on-success:
            - Registry_starting
        Registry_starting:
          node: Registry
          activity:
            set_state: starting
          on-success:
            - start_Registry
        start_Registry:
          node: Registry
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - Registry_started
        Registry_started:
          node: Registry
          activity:
            set_state: started
          on-success:
            - RegistryConfigurer_configuring_1
            - RegistryConfigurer_configuring
        Apache_initial:
          node: Apache
          activity:
            set_state: initial
          on-success:
            - Apache_creating
        Apache_creating:
          node: Apache
          activity:
            set_state: creating
          on-success:
            - create_Apache
        create_Apache:
          node: Apache
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - Apache_created
        Apache_created:
          node: Apache
          activity:
            set_state: created
          on-success:
            - Apache_configuring
        Apache_configuring:
          node: Apache
          activity:
            set_state: configuring
          on-success:
            - configure_Apache
        configure_Apache:
          node: Apache
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - Apache_configured
        Apache_configured:
          node: Apache
          activity:
            set_state: configured
          on-success:
            - Apache_starting
        Apache_starting:
          node: Apache
          activity:
            set_state: starting
          on-success:
            - start_Apache
        start_Apache:
          node: Apache
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - Apache_started
        Apache_started:
          node: Apache
          activity:
            set_state: started
          on-success:
            - Registry_initial
        PHP_initial:
          node: PHP
          activity:
            set_state: initial
          on-success:
            - PHP_creating
        PHP_creating:
          node: PHP
          activity:
            set_state: creating
          on-success:
            - create_PHP
        create_PHP:
          node: PHP
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - PHP_created
        PHP_created:
          node: PHP
          activity:
            set_state: created
          on-success:
            - PHP_configuring
        PHP_configuring:
          node: PHP
          activity:
            set_state: configuring
          on-success:
            - configure_PHP
        configure_PHP:
          node: PHP
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - PHP_configured
        PHP_configured:
          node: PHP
          activity:
            set_state: configured
          on-success:
            - PHP_starting
        PHP_starting:
          node: PHP
          activity:
            set_state: starting
          on-success:
            - start_PHP
        start_PHP:
          node: PHP
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - PHP_started
        PHP_started:
          node: PHP
          activity:
            set_state: started
          on-success:
            - Registry_configuring
        RegistryConfigurer_initial:
          node: RegistryConfigurerB
          activity:
            set_state: initial
          on-success:
            - RegistryConfigurer_creating
        RegistryConfigurer_creating:
          node: RegistryConfigurerB
          activity:
            set_state: creating
          on-success:
            - RegistryConfigurer_created
        RegistryConfigurer_created:
          node: RegistryConfigurerB
          activity:
            set_state: created
          on-success:
            - RegistryConfigurer_configuring
            - Registry_configuring
        RegistryConfigurer_configuring:
          node: RegistryConfigurerB
          activity:
            set_state: configuring
          on-success:
            - configure_RegistryConfigurer
        configure_RegistryConfigurer:
          node: RegistryConfigurerB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - RegistryConfigurer_configured
        RegistryConfigurer_configured:
          node: RegistryConfigurerB
          activity:
            set_state: configured
          on-success:
            - RegistryConfigurer_starting
        RegistryConfigurer_starting:
          node: RegistryConfigurerB
          activity:
            set_state: starting
          on-success:
            - start_RegistryConfigurer
        start_RegistryConfigurer:
          node: RegistryConfigurerB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - add_target_RegistryConfigurerB/registry/Registry
        RegistryConfigurer_started:
          node: RegistryConfigurerB
          activity:
            set_state: started
        RegistryConfigurer_initial_1:
          node: RegistryConfigurerA
          activity:
            set_state: initial
          on-success:
            - RegistryConfigurer_creating_1
        RegistryConfigurer_creating_1:
          node: RegistryConfigurerA
          activity:
            set_state: creating
          on-success:
            - RegistryConfigurer_created_1
        RegistryConfigurer_created_1:
          node: RegistryConfigurerA
          activity:
            set_state: created
          on-success:
            - RegistryConfigurer_configuring_1
            - Registry_configuring
        RegistryConfigurer_configuring_1:
          node: RegistryConfigurerA
          activity:
            set_state: configuring
          on-success:
            - configure_RegistryConfigurer_1
        configure_RegistryConfigurer_1:
          node: RegistryConfigurerA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - RegistryConfigurer_configured_1
        RegistryConfigurer_configured_1:
          node: RegistryConfigurerA
          activity:
            set_state: configured
          on-success:
            - RegistryConfigurer_starting_1
        RegistryConfigurer_starting_1:
          node: RegistryConfigurerA
          activity:
            set_state: starting
          on-success:
            - start_RegistryConfigurer_1
        start_RegistryConfigurer_1:
          node: RegistryConfigurerA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - add_target_RegistryConfigurerA/registry/Registry
        RegistryConfigurer_started_1:
          node: RegistryConfigurerA
          activity:
            set_state: started
        GenericHost_initial:
          node: GenericHostB
          activity:
            set_state: initial
          on-success:
            - GenericHost_creating
        GenericHost_creating:
          node: GenericHostB
          activity:
            set_state: creating
          on-success:
            - create_GenericHost
        create_GenericHost:
          node: GenericHostB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - GenericHost_created
        GenericHost_created:
          node: GenericHostB
          activity:
            set_state: created
          on-success:
            - GenericHost_configuring
        GenericHost_configuring:
          node: GenericHostB
          activity:
            set_state: configuring
          on-success:
            - pre_configure_target_GenericB/host/GenericHostB
        configure_GenericHost:
          node: GenericHostB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - post_configure_target_GenericB/host/GenericHostB
        GenericHost_configured:
          node: GenericHostB
          activity:
            set_state: configured
          on-success:
            - GenericHost_starting
        GenericHost_starting:
          node: GenericHostB
          activity:
            set_state: starting
          on-success:
            - start_GenericHost
        start_GenericHost:
          node: GenericHostB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - add_source_GenericB/host/GenericHostB
        GenericHost_started:
          node: GenericHostB
          activity:
            set_state: started
          on-success:
            - Generic_initial
        Generic_initial:
          node: GenericB
          activity:
            set_state: initial
          on-success:
            - Generic_creating
        Generic_creating:
          node: GenericB
          activity:
            set_state: creating
          on-success:
            - create_Generic
        create_Generic:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - Generic_created
        Generic_created:
          node: GenericB
          activity:
            set_state: created
          on-success:
            - Generic_configuring
        Generic_configuring:
          node: GenericB
          activity:
            set_state: configuring
          on-success:
            - pre_configure_source_GenericB/host/GenericHostB
            - pre_configure_target_GenericA/generic_requirement/GenericB
        configure_Generic:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - post_configure_source_GenericB/host/GenericHostB
            - post_configure_target_GenericA/generic_requirement/GenericB
        Generic_configured:
          node: GenericB
          activity:
            set_state: configured
          on-success:
            - Generic_starting
        Generic_starting:
          node: GenericB
          activity:
            set_state: starting
          on-success:
            - start_Generic
        start_Generic:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - add_source_GenericA/generic_requirement/GenericB
            - add_target_GenericB/host/GenericHostB
        Generic_started:
          node: GenericB
          activity:
            set_state: started
          on-success:
            - Generic_configuring_1
        GenericHost_initial_1:
          node: GenericHostA
          activity:
            set_state: initial
          on-success:
            - GenericHost_creating_1
        GenericHost_creating_1:
          node: GenericHostA
          activity:
            set_state: creating
          on-success:
            - create_GenericHost_1
        create_GenericHost_1:
          node: GenericHostA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - GenericHost_created_1
        GenericHost_created_1:
          node: GenericHostA
          activity:
            set_state: created
          on-success:
            - GenericHost_configuring_1
        GenericHost_configuring_1:
          node: GenericHostA
          activity:
            set_state: configuring
          on-success:
            - pre_configure_target_GenericA/host/GenericHostA
        configure_GenericHost_1:
          node: GenericHostA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - post_configure_target_GenericA/host/GenericHostA
        GenericHost_configured_1:
          node: GenericHostA
          activity:
            set_state: configured
          on-success:
            - GenericHost_starting_1
        GenericHost_starting_1:
          node: GenericHostA
          activity:
            set_state: starting
          on-success:
            - start_GenericHost_1
        start_GenericHost_1:
          node: GenericHostA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - add_source_GenericA/host/GenericHostA
        GenericHost_started_1:
          node: GenericHostA
          activity:
            set_state: started
          on-success:
            - Generic_initial_1
        Generic_initial_1:
          node: GenericA
          activity:
            set_state: initial
          on-success:
            - Generic_creating_1
        Generic_creating_1:
          node: GenericA
          activity:
            set_state: creating
          on-success:
            - create_Generic_1
        create_Generic_1:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.create
          on-success:
            - Generic_created_1
        Generic_created_1:
          node: GenericA
          activity:
            set_state: created
          on-success:
            - Generic_configuring_1
            - Generic_configuring
        Generic_configuring_1:
          node: GenericA
          activity:
            set_state: configuring
          on-success:
            - pre_configure_source_GenericA/generic_requirement/GenericB
            - pre_configure_source_GenericA/host/GenericHostA
        configure_Generic_1:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.configure
          on-success:
            - post_configure_source_GenericA/generic_requirement/GenericB
            - post_configure_source_GenericA/host/GenericHostA
        Generic_configured_1:
          node: GenericA
          activity:
            set_state: configured
          on-success:
            - Generic_starting_1
        Generic_starting_1:
          node: GenericA
          activity:
            set_state: starting
          on-success:
            - start_Generic_1
        start_Generic_1:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.start
          on-success:
            - add_target_GenericA/host/GenericHostA
            - add_target_GenericA/generic_requirement/GenericB
        Generic_started_1:
          node: GenericA
          activity:
            set_state: started
        pre_configure_source_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.pre_configure_source/generic_requirement/GenericB
          on-success:
            - configure_Generic_1
        pre_configure_source_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.pre_configure_source/host/GenericHostA
          on-success:
            - configure_Generic_1
        post_configure_source_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.post_configure_source/generic_requirement/GenericB
          on-success:
            - Generic_configured_1
        post_configure_source_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.post_configure_source/host/GenericHostA
          on-success:
            - Generic_configured_1
        add_target_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_target/generic_requirement/GenericB
          on-success:
            - Generic_started_1
        add_target_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_target/host/GenericHostA
          on-success:
            - Generic_started_1
        pre_configure_source_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.pre_configure_source/host/GenericHostB
          on-success:
            - configure_Generic
        post_configure_source_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.post_configure_source/host/GenericHostB
          on-success:
            - Generic_configured
        add_target_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_target/host/GenericHostB
          on-success:
            - Generic_started
        add_target_RegistryConfigurerB/registry/Registry:
          node: RegistryConfigurerB
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_target/registry/Registry
          on-success:
            - RegistryConfigurer_started
        add_target_RegistryConfigurerA/registry/Registry:
          node: RegistryConfigurerA
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_target/registry/Registry
          on-success:
            - RegistryConfigurer_started_1
        pre_configure_target_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.pre_configure_target/host/GenericHostA
          on-success:
            - configure_GenericHost_1
        post_configure_target_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.post_configure_target/host/GenericHostA
          on-success:
            - GenericHost_configured_1
        add_source_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_source/host/GenericHostA
          on-success:
            - GenericHost_started_1
        pre_configure_target_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.pre_configure_target/generic_requirement/GenericB
          on-success:
            - configure_Generic
        post_configure_target_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.post_configure_target/generic_requirement/GenericB
          on-success:
            - Generic_configured
        add_source_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_source/generic_requirement/GenericB
          on-success:
            - Generic_started
        pre_configure_target_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.pre_configure_target/host/GenericHostB
          on-success:
            - configure_GenericHost
        post_configure_target_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.post_configure_target/host/GenericHostB
          on-success:
            - GenericHost_configured
        add_source_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.add_source/host/GenericHostB
          on-success:
            - GenericHost_started
    uninstall:
      steps:
        Network_uninstall:
          node: Network
          activity:
            delegate: uninstall
        Compute_uninstall:
          node: ComputeA
          activity:
            delegate: uninstall
        Compute_uninstall_1:
          node: ComputeB
          activity:
            delegate: uninstall
        Compute_uninstall_2:
          node: ComputeRegistry
          activity:
            delegate: uninstall
          on-success:
            - Network_uninstall
        Registry_stopping:
          node: Registry
          activity:
            set_state: stopping
          on-success:
            - Registry_stopped
        Registry_stopped:
          node: Registry
          activity:
            set_state: stopped
          on-success:
            - Registry_deleting
            - PHP_stopping
        Registry_deleting:
          node: Registry
          activity:
            set_state: deleting
          on-success:
            - Registry_deleted
        Registry_deleted:
          node: Registry
          activity:
            set_state: deleted
          on-success:
            - Apache_stopping
        Apache_stopping:
          node: Apache
          activity:
            set_state: stopping
          on-success:
            - Apache_stopped
        Apache_stopped:
          node: Apache
          activity:
            set_state: stopped
          on-success:
            - Apache_deleting
        Apache_deleting:
          node: Apache
          activity:
            set_state: deleting
          on-success:
            - Apache_deleted
        Apache_deleted:
          node: Apache
          activity:
            set_state: deleted
          on-success:
            - Compute_uninstall_2
        PHP_stopping:
          node: PHP
          activity:
            set_state: stopping
          on-success:
            - PHP_stopped
        PHP_stopped:
          node: PHP
          activity:
            set_state: stopped
          on-success:
            - PHP_deleting
        PHP_deleting:
          node: PHP
          activity:
            set_state: deleting
          on-success:
            - PHP_deleted
        PHP_deleted:
          node: PHP
          activity:
            set_state: deleted
          on-success:
            - Compute_uninstall_2
        RegistryConfigurer_stopping:
          node: RegistryConfigurerB
          activity:
            set_state: stopping
          on-success:
            - RegistryConfigurer_stopped
        RegistryConfigurer_stopped:
          node: RegistryConfigurerB
          activity:
            set_state: stopped
          on-success:
            - RegistryConfigurer_deleting
        RegistryConfigurer_deleting:
          node: RegistryConfigurerB
          activity:
            set_state: deleting
          on-success:
            - RegistryConfigurer_deleted
        RegistryConfigurer_deleted:
          node: RegistryConfigurerB
          activity:
            set_state: deleted
          on-success:
            - Compute_uninstall_1
        RegistryConfigurer_stopping_1:
          node: RegistryConfigurerA
          activity:
            set_state: stopping
          on-success:
            - RegistryConfigurer_stopped_1
        RegistryConfigurer_stopped_1:
          node: RegistryConfigurerA
          activity:
            set_state: stopped
          on-success:
            - RegistryConfigurer_deleting_1
        RegistryConfigurer_deleting_1:
          node: RegistryConfigurerA
          activity:
            set_state: deleting
          on-success:
            - RegistryConfigurer_deleted_1
        RegistryConfigurer_deleted_1:
          node: RegistryConfigurerA
          activity:
            set_state: deleted
          on-success:
            - Compute_uninstall
        GenericHost_stopping:
          node: GenericHostB
          activity:
            set_state: stopping
          on-success:
            - stop_GenericHost
        stop_GenericHost:
          node: GenericHostB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.stop
          on-success:
            - GenericHost_stopped
        GenericHost_stopped:
          node: GenericHostB
          activity:
            set_state: stopped
          on-success:
            - GenericHost_deleting
        GenericHost_deleting:
          node: GenericHostB
          activity:
            set_state: deleting
          on-success:
            - delete_GenericHost
        delete_GenericHost:
          node: GenericHostB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.delete
          on-success:
            - GenericHost_deleted
        GenericHost_deleted:
          node: GenericHostB
          activity:
            set_state: deleted
          on-success:
            - Compute_uninstall_1
        Generic_stopping:
          node: GenericB
          activity:
            set_state: stopping
          on-success:
            - stop_Generic
        stop_Generic:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.stop
          on-success:
            - Generic_stopped
        Generic_stopped:
          node: GenericB
          activity:
            set_state: stopped
          on-success:
            - Generic_deleting
        Generic_deleting:
          node: GenericB
          activity:
            set_state: deleting
          on-success:
            - delete_Generic
        delete_Generic:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.delete
          on-success:
            - remove_target_GenericB/host/GenericHostB
            - remove_source_GenericB/host/GenericHostB
        Generic_deleted:
          node: GenericB
          activity:
            set_state: deleted
          on-success:
            - GenericHost_stopping
        GenericHost_stopping_1:
          node: GenericHostA
          activity:
            set_state: stopping
          on-success:
            - stop_GenericHost_1
        stop_GenericHost_1:
          node: GenericHostA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.stop
          on-success:
            - GenericHost_stopped_1
        GenericHost_stopped_1:
          node: GenericHostA
          activity:
            set_state: stopped
          on-success:
            - GenericHost_deleting_1
        GenericHost_deleting_1:
          node: GenericHostA
          activity:
            set_state: deleting
          on-success:
            - delete_GenericHost_1
        delete_GenericHost_1:
          node: GenericHostA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.delete
          on-success:
            - GenericHost_deleted_1
        GenericHost_deleted_1:
          node: GenericHostA
          activity:
            set_state: deleted
          on-success:
            - Compute_uninstall
        Generic_stopping_1:
          node: GenericA
          activity:
            set_state: stopping
          on-success:
            - stop_Generic_1
        stop_Generic_1:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.stop
          on-success:
            - Generic_stopped_1
        Generic_stopped_1:
          node: GenericA
          activity:
            set_state: stopped
          on-success:
            - Generic_stopping
            - Generic_deleting_1
        Generic_deleting_1:
          node: GenericA
          activity:
            set_state: deleting
          on-success:
            - delete_Generic_1
        delete_Generic_1:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.node.lifecycle.Standard.delete
          on-success:
            - remove_source_GenericA/generic_requirement/GenericB
            - remove_target_GenericA/host/GenericHostA
            - remove_target_GenericA/generic_requirement/GenericB
            - remove_source_GenericA/host/GenericHostA
        Generic_deleted_1:
          node: GenericA
          activity:
            set_state: deleted
          on-success:
            - GenericHost_stopping_1
        remove_target_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.remove_target/host/GenericHostA
          on-success:
            - Generic_deleted_1
        remove_source_GenericA/host/GenericHostA:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.remove_source/host/GenericHostA
          on-success:
            - Generic_deleted_1
        remove_target_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.remove_target/generic_requirement/GenericB
          on-success:
            - Generic_deleted_1
        remove_source_GenericA/generic_requirement/GenericB:
          node: GenericA
          activity:
            call_operation: tosca.interfaces.relationship.configure.remove_source/generic_requirement/GenericB
          on-success:
            - Generic_deleted_1
        remove_target_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.remove_target/host/GenericHostB
          on-success:
            - Generic_deleted
        remove_source_GenericB/host/GenericHostB:
          node: GenericB
          activity:
            call_operation: tosca.interfaces.relationship.configure.remove_source/host/GenericHostB
          on-success:
            - Generic_deleted